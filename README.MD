#  Catastro Automatic - Con Sistema de Licencias

Esta extensi贸n basada en Chromium est谩 dise帽ada para optimizar y automatizar el llenado de fichas en plataformas de **Registro Catastral** basadas en **React** y **Ant Design**. Incluye un sistema de validaci贸n de licencias para control de acceso.

---

##  Sistema de Licencias

### Caracter铆sticas del Sistema

- **Validaci贸n Online**: Verifica la licencia contra un servidor API REST
- **Cache Local**: Guarda la licencia v谩lida localmente para evitar consultas innecesarias
- **Verificaci贸n Peri贸dica**: Consulta el servidor cada 24 horas para renovar la validaci贸n
- **Manejo de Expiraci贸n**: Detecta licencias expiradas y muestra mensajes apropiados
- **Soporte Offline**: Funciona con la licencia guardada cuando no hay conexi贸n

---

##  Caracter铆sticas Principales

### 1. Interfaz de Control (Popup)
- **Persistencia**: Los datos se guardan en `chrome.storage.local`
- **Indicador de Licencia**: Muestra d铆as restantes de la licencia activa
- **Gesti贸n de Datos**: Botones para guardar, limpiar, exportar e importar

### 2. Verificaci贸n de Licencia
- **Al abrir el popup**: Verifica la licencia antes de mostrar el contenido
- **En content scripts**: Verifica antes de ejecutar cualquier automatizaci贸n
- **Mensajes claros**: Muestra informaci贸n sobre el estado de la licencia

### 3. Inyecci贸n de Datos
- **Bypass de React**: Usa setters nativos para compatibilidad con React
- **Mapeo Inteligente**: Identifica campos por selectores o etiquetas

---

##  Estructura del Proyecto

```
catastro-extension/
 manifest.json              # Configuraci贸n de la extensi贸n
 popup.html                 # HTML del popup principal
 popup.js                   # L贸gica del popup con verificaci贸n de licencia
 popup.css                  # Estilos del popup
 popup-content.html         # Contenido del popup (cargado din谩micamente)
 license.html               # P谩gina de activaci贸n de licencia
 license-config.js          # Configuraci贸n de la API de licencias
 license-manager.js         # L贸gica de gesti贸n de licencias
 license-ui.js              # UI para la p谩gina de licencias
 content-individual.js      # Script para ficha individual
 content-cotitularidad.js   # Script para cotitularidad
 bb.png                     # cono de la extensi贸n
```

---

##  Instalaci贸n

1. **Descargar el proyecto**: Aseg煤rese de tener todos los archivos en una carpeta

2. **Abrir Extensiones**: En Chrome, vaya a `chrome://extensions/`

3. **Modo Desarrollador**: Active el interruptor de **"Modo de desarrollador"**

4. **Cargar carpeta**: Haga clic en **"Cargar descomprimida"** y seleccione la carpeta

---

##  Flujo de Trabajo

1. **Activaci贸n de Licencia**: El usuario ingresa su c贸digo de licencia
2. **Verificaci贸n**: El sistema valida contra el servidor API
3. **Almacenamiento**: La licencia v谩lida se guarda localmente
4. **Uso Normal**: La extensi贸n funciona normalmente hasta que expire

### Estados de Licencia

| Estado | Comportamiento |
|--------|----------------|
| **Sin licencia** | Muestra pantalla de activaci贸n |
| **Licencia v谩lida** | Funciona normalmente |
| **Licencia expirada** | Bloquea funcionalidad, pide renovaci贸n |
| **Sin conexi贸n** | Usa licencia guardada localmente |

---

## 锔 Especificaciones T茅cnicas

### Campos Soportados
- `principales`: sector, manzana, lote
- `ubicacion`: c贸digo v铆a, c贸digo HU, N掳 municipal, manzana, lote, sub-lote
- `descripcion`: zonificaci贸n, 谩reas, linderos
- `inscripcion`: n煤mero, asiento, fecha
- `final`: observaciones, supervisor, t茅cnico

### Almacenamiento
- `licenseCode`: C贸digo de licencia activo
- `licenseData`: Datos de la licencia (expiraci贸n, estado)
- `lastLicenseCheck`: ltima verificaci贸n online
- `fichaCatastralData`: Datos del formulario

---

##  Soporte

Si tiene problemas con la licencia, contacte al n煤mero de soporte configurado:
- **WhatsApp**: [992517309](https://wa.me/51992517309)

---

##  Licencia

MIT License - Copyright (c) 2026 KDA
