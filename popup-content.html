<!-- Header con título y botón modo oscuro -->
<header class="main-header">
  <h1 class="main-title">📋 Ficha Catastral</h1>
  <button class="btn-theme" id="btn-theme" title="Cambiar tema">🌙</button>
</header>

<!-- SECCIÓN PRINCIPALES -->
<section class="seccion" id="seccion-principales">
  <div class="seccion-header">
    <h2>📍 Principales</h2>
    <div class="seccion-buttons">
      <button class="btn btn-save" data-action="save" data-section="principales">💾</button>
      <button class="btn btn-clear" data-action="clear" data-section="principales">🗑️</button>
    </div>
  </div>
  <div class="seccion-content">
    <div class="seccion-content grid-3">
      <div class="field-group">
        <label for="principales-sector">SECTOR</label>
        <input type="text" id="principales-sector" name="sector">
      </div>
      <div class="field-group">
        <label for="principales-manzana">MANZANA</label>
        <input type="text" id="principales-manzana" name="manzana">
      </div>
      <div class="field-group">
        <label for="principales-lote">LOTE</label>
        <input type="text" id="principales-lote" name="lote">
      </div>
    </div>
  </div>
</section>

<!-- SECCIÓN UBICACIÓN -->
<section class="seccion" id="seccion-ubicacion">
  <div class="seccion-header">
    <h2>📌 Ubicación</h2>
    <div class="seccion-buttons">
      <button class="btn btn-save" data-action="save" data-section="ubicacion">💾</button>
      <button class="btn btn-clear" data-action="clear" data-section="ubicacion">🗑️</button>
    </div>
  </div>
  <div class="seccion-content grid-3">
    <div class="field-group">
      <label for="ubicacion-codigo-via">CÓDIGO VÍA</label>
      <input type="text" id="ubicacion-codigo-via" name="codigo_via">
    </div>
    <div class="field-group">
      <label for="ubicacion-codigo-hu">CÓDIGO HU</label>
      <input type="text" id="ubicacion-codigo-hu" name="codigo_hu">
    </div>
    <div class="field-group">
      <label for="ubicacion-n-municipal">N° MUNICIPAL</label>
      <input type="text" id="ubicacion-n-municipal" name="n_municipal">
    </div>
    <div class="field-group">
      <label for="ubicacion-manzana">MANZANA</label>
      <input type="text" id="ubicacion-manzana" name="manzana">
    </div>
    <div class="field-group">
      <label for="ubicacion-lote">LOTE</label>
      <input type="text" id="ubicacion-lote" name="lote">
    </div>
    <div class="field-group">
      <label for="ubicacion-sub-lote">SUB-LOTE</label>
      <input type="text" id="ubicacion-sub-lote" name="sub_lote">
    </div>
  </div>
</section>

<!-- SECCIÓN DESCRIPCIÓN -->
<section class="seccion" id="seccion-descripcion">
  <div class="seccion-header">
    <h2>📝 Descripción</h2>
    <div class="seccion-buttons">
      <button class="btn btn-save" data-action="save" data-section="descripcion">💾</button>
      <button class="btn btn-clear" data-action="clear" data-section="descripcion">🗑️</button>
    </div>
  </div>
  <div class="seccion-content">
    <div class="field-row-3">
      <div class="field-group">
        <label for="descripcion-zonificacion">ZONIFICACIÓN</label>
        <input type="text" id="descripcion-zonificacion" name="zonificacion">
      </div>
      <div class="field-group">
        <label for="descripcion-area-adquirida">ÁREA ADQUIRIDA</label>
        <input type="text" id="descripcion-area-adquirida" name="area_adquirida">
      </div>
      <div class="field-group">
        <label for="descripcion-area-verificada">ÁREA VERIFICADA</label>
        <input type="text" id="descripcion-area-verificada" name="area_verificada">
      </div>
    </div>
    
    <!-- Tabla de Linderos -->
    <div class="tabla-linderos">
      <table class="tabla-simple">
        <thead>
          <tr>
            <th>LINDEROS</th>
            <th>MEDIDA</th>
            <th>COLINDANCIAS</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="lindero-label">FRENTE</td>
            <td><input type="text" id="lindero-frente-medida" name="frente_medida"></td>
            <td><input type="text" id="lindero-frente-colindancia" name="frente_colindancia"></td>
          </tr>
          <tr>
            <td class="lindero-label">DERECHA</td>
            <td><input type="text" id="lindero-derecha-medida" name="derecha_medida"></td>
            <td><input type="text" id="lindero-derecha-colindancia" name="derecha_colindancia"></td>
          </tr>
          <tr>
            <td class="lindero-label">IZQUIERDA</td>
            <td><input type="text" id="lindero-izquierda-medida" name="izquierda_medida"></td>
            <td><input type="text" id="lindero-izquierda-colindancia" name="izquierda_colindancia"></td>
          </tr>
          <tr>
            <td class="lindero-label">FONDO</td>
            <td><input type="text" id="lindero-fondo-medida" name="fondo_medida"></td>
            <td><input type="text" id="lindero-fondo-colindancia" name="fondo_colindancia"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- SECCIÓN CONSTRUCCIONES -->
<section class="seccion" id="seccion-construcciones">
  <div class="seccion-header">
    <h2>🏗️ Construcciones</h2>
    <div class="seccion-buttons">
      <button class="btn btn-add" data-action="add-row" data-section="construcciones">➕</button>
      <button class="btn btn-save" data-action="save" data-section="construcciones">💾</button>
      <button class="btn btn-clear" data-action="clear" data-section="construcciones">🗑️</button>
      <button class="btn btn-execute" data-action="execute" data-section="construcciones" title="Ejecutar automatización">▶️</button>
    </div>
  </div>
  <div class="tabla-excel-container">
    <table class="tabla-excel" id="tabla-construcciones">
      <thead>
        <tr>
          <th>NPISO</th>
          <th>MES</th>
          <th>AÑO</th>
          <th>MEP</th>
          <th>ECS</th>
          <th>ECC</th>
          <th>MURO</th>
          <th>TECHO</th>
          <th>PISO</th>
          <th>PUERTA</th>
          <th>REVEST</th>
          <th>BAÑO</th>
          <th>INST</th>
          <th>AREA</th>
          <th>UCA</th>
          <th>ACC</th>
        </tr>
      </thead>
      <tbody id="tbody-construcciones">
        <tr data-row-id="1">
          <td><input type="text" name="npiso"></td>
          <td><input type="text" name="mes"></td>
          <td><input type="text" name="anio"></td>
          <td><input type="text" name="mep"></td>
          <td><input type="text" name="ecs"></td>
          <td><input type="text" name="ecc"></td>
          <td><input type="text" name="muro"></td>
          <td><input type="text" name="techo"></td>
          <td><input type="text" name="piso"></td>
          <td><input type="text" name="puerta"></td>
          <td><input type="text" name="revest"></td>
          <td><input type="text" name="banio"></td>
          <td><input type="text" name="inst"></td>
          <td><input type="text" name="area"></td>
          <td><input type="text" name="uca"></td>
          <td class="acciones-cell">
            <button class="btn-row btn-duplicate" data-action="duplicate">📋</button>
            <button class="btn-row btn-delete" data-action="delete">❌</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

<!-- SECCIÓN OBRAS -->
<section class="seccion" id="seccion-obras">
  <div class="seccion-header">
    <h2>🔧 Obras</h2>
    <div class="seccion-buttons">
      <button class="btn btn-add" data-action="add-row" data-section="obras">➕</button>
      <button class="btn btn-save" data-action="save" data-section="obras">💾</button>
      <button class="btn btn-clear" data-action="clear" data-section="obras">🗑️</button>
      <button class="btn btn-execute" data-action="execute" data-section="obras" title="Ejecutar automatización">▶️</button>
    </div>
  </div>
  <div class="tabla-excel-container">
    <table class="tabla-excel" id="tabla-obras">
      <thead>
        <tr>
          <th>CÓDIGO</th>
          <th>MES</th>
          <th>AÑO</th>
          <th>MEP</th>
          <th>ECS</th>
          <th>ECC</th>
          <th>TOTAL</th>
          <th>UCA</th>
          <th>ACC</th>
        </tr>
      </thead>
      <tbody id="tbody-obras">
        <tr data-row-id="1">
          <td><input type="text" name="codigo"></td>
          <td><input type="text" name="mes"></td>
          <td><input type="text" name="anio"></td>
          <td><input type="text" name="mep"></td>
          <td><input type="text" name="ecs"></td>
          <td><input type="text" name="ecc"></td>
          <td><input type="text" name="total"></td>
          <td><input type="text" name="uca"></td>
          <td class="acciones-cell">
            <button class="btn-row btn-duplicate" data-action="duplicate">📋</button>
            <button class="btn-row btn-delete" data-action="delete">❌</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

<!-- SECCIÓN INSCRIPCIÓN -->
<section class="seccion" id="seccion-inscripcion">
  <div class="seccion-header">
    <h2>📜 Inscripción</h2>
    <div class="seccion-buttons">
      <button class="btn btn-save" data-action="save" data-section="inscripcion">💾</button>
      <button class="btn btn-clear" data-action="clear" data-section="inscripcion">🗑️</button>
    </div>
  </div>
  <div class="seccion-content grid-3">
    <div class="field-group">
      <label for="inscripcion-numero">NÚMERO</label>
      <input type="text" id="inscripcion-numero" name="numero">
    </div>
    <div class="field-group">
      <label for="inscripcion-asiento">ASIENTO</label>
      <input type="text" id="inscripcion-asiento" name="asiento">
    </div>
    <div class="field-group">
      <label for="inscripcion-fecha">FECHA</label>
      <input type="text" id="inscripcion-fecha" name="fecha" placeholder="DD/MM/YYYY">
    </div>
  </div>
</section>

<!-- SECCIÓN FINAL -->
<section class="seccion" id="seccion-final">
  <div class="seccion-header">
    <h2>✅ Final</h2>
    <div class="seccion-buttons">
      <button class="btn btn-save" data-action="save" data-section="final">💾</button>
      <button class="btn btn-clear" data-action="clear" data-section="final">🗑️</button>
    </div>
  </div>
  <div class="seccion-content">
    <div class="field-group field-full">
      <label for="final-observaciones">OBSERVACIONES</label>
      <textarea id="final-observaciones" name="observaciones" rows="4"></textarea>
    </div>
    
    <div class="subseccion-row">
      <div class="subseccion">
        <h4>👨‍💼 SUPERVISOR</h4>
        <div class="field-group">
          <label for="final-supervisor-nombre">NOMBRE</label>
          <input type="text" id="final-supervisor-nombre" name="supervisor_nombre">
        </div>
        <div class="field-group">
          <label for="final-supervisor-fecha">FECHA</label>
          <input type="text" id="final-supervisor-fecha" name="supervisor_fecha" placeholder="DD/MM/YYYY">
        </div>
      </div>
      
      <div class="subseccion">
        <h4>👷 TÉCNICO</h4>
        <div class="field-group">
          <label for="final-tecnico-nombre">NOMBRE</label>
          <input type="text" id="final-tecnico-nombre" name="tecnico_nombre">
        </div>
        <div class="field-group">
          <label for="final-tecnico-fecha">FECHA</label>
          <input type="text" id="final-tecnico-fecha" name="tecnico_fecha" placeholder="DD/MM/YYYY">
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Botones globales -->
<div class="global-actions">
  <button class="btn btn-global-save" id="btn-guardar-todo">💾 Guardar</button>
  <button class="btn btn-global-clear" id="btn-limpiar-todo">🗑️ Limpiar</button>
  <button class="btn btn-global-export" id="btn-exportar">📤 Exportar</button>
  <button class="btn btn-global-import" id="btn-importar">📥 Importar</button>
  <input type="file" id="input-importar" accept=".json" style="display: none;">
</div>
